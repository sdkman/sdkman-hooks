set -e

track_last_command() {
    last_command=$current_command
    current_command=$BASH_COMMAND
}
trap track_last_command DEBUG

echo_failed_command() {
    echo "'$last_command': command failed with exit code $?."
}
trap echo_failed_command EXIT
